<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeSimulator: Open World</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: white;
            padding: 15px;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 15px;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .stat-value {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.8;
        }

        .city-map {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .location-image {
            font-size: 80px;
            margin-bottom: 15px;
        }

        .location-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .location-description {
            opacity: 0.8;
            margin-bottom: 20px;
        }

        .navigation-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .nav-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .nav-btn:active {
            background: rgba(255,255,255,0.4);
            transform: scale(0.95);
        }

        .action-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .action-btn {
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            border: none;
            color: white;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .action-btn:active {
            transform: scale(0.95);
        }

        .action-btn.secondary {
            background: linear-gradient(45deg, #4ECDC4, #44A08D);
        }

        .action-btn.premium {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #333;
        }

        .tabs {
            display: flex;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 5px;
            margin-bottom: 15px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 12px 8px;
            text-align: center;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            font-size: 12px;
            min-width: 80px;
            white-space: nowrap;
        }

        .tab.active {
            background: rgba(255,255,255,0.2);
        }

        .content-area {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            min-height: 200px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .inventory-item {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .job-option {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
            max-width: 90%;
            text-align: center;
        }

        .notification.show {
            opacity: 1;
        }

        .building-list {
            display: grid;
            gap: 10px;
        }

        .building-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }

        .building-btn:active {
            background: rgba(255,255,255,0.2);
        }

        .crypto-price {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .price-up {
            color: #4ECDC4;
        }

        .price-down {
            color: #FF6B6B;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèôÔ∏è LifeSimulator: Open World</h1>
            <p>–ñ–∏–≤–∏, —Ä–∞–±–æ—Ç–∞–π, –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –º–∏—Ä–µ!</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="money">$1,000</div>
                <div class="stat-label">üíµ –î–µ–Ω—å–≥–∏</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="energy">100%</div>
                <div class="stat-label">‚ö° –≠–Ω–µ—Ä–≥–∏—è</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="level">1</div>
                <div class="stat-label">‚≠ê –£—Ä–æ–≤–µ–Ω—å</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="time">08:00</div>
                <div class="stat-label">üïê –í—Ä–µ–º—è</div>
            </div>
        </div>

        <div class="city-map">
            <div class="location-image" id="locationImage">üè†</div>
            <div class="location-name" id="locationName">–í–∞—à –¥–æ–º</div>
            <div class="location-description" id="locationDescription">–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –¥–æ–º–∞. –ú–æ–∂–Ω–æ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ –≥–æ—Ä–æ–¥.</div>
        </div>

        <div class="navigation-buttons">
            <button class="nav-btn" onclick="moveToLocation('home')">üè† –î–æ–º–æ–π</button>
            <button class="nav-btn" onclick="moveToLocation('work')">üíº –†–∞–±–æ—Ç–∞</button>
            <button class="nav-btn" onclick="moveToLocation('city')">üèôÔ∏è –ì–æ—Ä–æ–¥</button>
            <button class="nav-btn" onclick="moveToLocation('casino')">üé∞ –ö–∞–∑–∏–Ω–æ</button>
        </div>

        <div class="action-buttons">
            <button class="action-btn" onclick="performAction('work')">üíº –†–∞–±–æ—Ç–∞—Ç—å</button>
            <button class="action-btn secondary" onclick="performAction('rest')">üò¥ –û—Ç–¥—ã—Ö–∞—Ç—å</button>
            <button class="action-btn" onclick="performAction('casino')">üé∞ –ò–≥—Ä–∞—Ç—å</button>
            <button class="action-btn secondary" onclick="performAction('crypto')">‚Çø –ö—Ä–∏–ø—Ç–æ</button>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="locations">üìç –õ–æ–∫–∞—Ü–∏–∏</div>
            <div class="tab" data-tab="inventory">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</div>
            <div class="tab" data-tab="jobs">üíº –†–∞–±–æ—Ç–∞</div>
            <div class="tab" data-tab="crypto">‚Çø –ö—Ä–∏–ø—Ç–æ</div>
            <div class="tab" data-tab="properties">üè† –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</div>
        </div>

        <div class="content-area">
            <!-- –õ–æ–∫–∞—Ü–∏–∏ -->
            <div class="tab-content active" id="locationsContent">
                <div class="building-list">
                    <button class="building-btn" onclick="enterBuilding('house')">
                        üè† –í–∞—à –¥–æ–º - –û—Ç–¥—ã—Ö –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏
                    </button>
                    <button class="building-btn" onclick="enterBuilding('office')">
                        üè¢ –û—Ñ–∏—Å - –†–∞–±–æ—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–º
                    </button>
                    <button class="building-btn" onclick="enterBuilding('casino')">
                        üé∞ –ö–∞–∑–∏–Ω–æ Golden - –ò—Å–ø—ã—Ç–∞–π —É–¥–∞—á—É
                    </button>
                    <button class="building-btn" onclick="enterBuilding('car_dealer')">
                        üöó –ê–≤—Ç–æ—Å–∞–ª–æ–Ω - –ö—É–ø–∏—Ç—å –º–∞—à–∏–Ω—É
                    </button>
                    <button class="building-btn" onclick="enterBuilding('bank')">
                        üè¶ –ë–∞–Ω–∫ - –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –∏ –∫—Ä–µ–¥–∏—Ç—ã
                    </button>
                </div>
            </div>

            <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å -->
            <div class="tab-content" id="inventoryContent">
                <div class="inventory-item">
                    <span>üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç:</span>
                    <span id="inventoryCar">Honda Civic</span>
                </div>
                <div class="inventory-item">
                    <span>üè† –î–æ–º:</span>
                    <span id="inventoryHouse">–ö–≤–∞—Ä—Ç–∏—Ä–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ</span>
                </div>
                <div class="inventory-item">
                    <span>üíµ –ù–∞–ª–∏—á–Ω—ã–µ:</span>
                    <span id="inventoryCash">$1,000</span>
                </div>
                <div class="inventory-item">
                    <span>üì± –¢–µ–ª–µ—Ñ–æ–Ω:</span>
                    <span>iPhone 15</span>
                </div>
                <div class="inventory-item">
                    <span>‚Çø –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞:</span>
                    <span id="inventoryCrypto">0 BTC</span>
                </div>
            </div>

            <!-- –†–∞–±–æ—Ç–∞ -->
            <div class="tab-content" id="jobsContent">
                <div class="job-option">
                    <h4>üíº –û—Ñ–∏—Å–Ω—ã–π —Ä–∞–±–æ—Ç–Ω–∏–∫</h4>
                    <p>–ó–∞—Ä–ø–ª–∞—Ç–∞: $80 | –≠–Ω–µ—Ä–≥–∏—è: -20%</p>
                    <button class="action-btn" onclick="startJob('office')">–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É</button>
                </div>
                <div class="job-option">
                    <h4>üöï –¢–∞–∫—Å–∏—Å—Ç</h4>
                    <p>–ó–∞—Ä–ø–ª–∞—Ç–∞: $120 | –≠–Ω–µ—Ä–≥–∏—è: -30%</p>
                    <button class="action-btn" onclick="startJob('taxi')">–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É</button>
                </div>
                <div class="job-option">
                    <h4>üé∞ –ö—Ä—É–ø—å–µ</h4>
                    <p>–ó–∞—Ä–ø–ª–∞—Ç–∞: $150 | –≠–Ω–µ—Ä–≥–∏—è: -25%</p>
                    <button class="action-btn" onclick="startJob('dealer')">–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É</button>
                </div>
                <div class="job-option">
                    <h4>üíª –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç</h4>
                    <p>–ó–∞—Ä–ø–ª–∞—Ç–∞: $200 | –≠–Ω–µ—Ä–≥–∏—è: -35%</p>
                    <button class="action-btn" onclick="startJob('programmer')">–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É</button>
                </div>
            </div>

            <!-- –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞ -->
            <div class="tab-content" id="cryptoContent">
                <h4>üìä –ö—É—Ä—Å—ã –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç</h4>
                <div class="crypto-price">
                    <span>‚Çø Bitcoin:</span>
                    <span class="price-up" id="btcPrice">$45,231 +2.5%</span>
                </div>
                <div class="crypto-price">
                    <span>Œû Ethereum:</span>
                    <span class="price-up" id="ethPrice">$3,215 +1.8%</span>
                </div>
                <div class="crypto-price">
                    <span>∆â Dogecoin:</span>
                    <span class="price-down" id="dogePrice">$0.15 -0.3%</span>
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="action-btn" onclick="buyCrypto('btc')">–ö—É–ø–∏—Ç—å Bitcoin</button>
                    <button class="action-btn secondary" onclick="sellCrypto('btc')">–ü—Ä–æ–¥–∞—Ç—å Bitcoin</button>
                </div>
            </div>

            <!-- –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å -->
            <div class="tab-content" id="propertiesContent">
                <div class="job-option">
                    <h4>üè† –ö–≤–∞—Ä—Ç–∏—Ä–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ</h4>
                    <p>–¶–µ–Ω–∞: $50,000 | –î–æ—Ö–æ–¥: $500/–º–µ—Å</p>
                    <button class="action-btn" onclick="buyProperty('apartment')">–ö—É–ø–∏—Ç—å</button>
                </div>
                <div class="job-option">
                    <h4>üöó Honda Civic</h4>
                    <p>–¶–µ–Ω–∞: $25,000 | –°–∫–æ—Ä–æ—Å—Ç—å: +50%</p>
                    <button class="action-btn" onclick="buyProperty('car')">–ö—É–ø–∏—Ç—å</button>
                </div>
                <div class="job-option">
                    <h4>üè¢ –û—Ñ–∏—Å–Ω–æ–µ –∑–¥–∞–Ω–∏–µ</h4>
                    <p>–¶–µ–Ω–∞: $200,000 | –î–æ—Ö–æ–¥: $2,000/–º–µ—Å</p>
                    <button class="action-btn" onclick="buyProperty('office')">–ö—É–ø–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameState = {
            money: 1000,
            energy: 100,
            level: 1,
            experience: 0,
            time: "08:00",
            currentLocation: "home",
            crypto: {
                btc: 0,
                eth: 0,
                doge: 0
            },
            properties: {
                car: "Honda Civic",
                house: "–ö–≤–∞—Ä—Ç–∏—Ä–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ",
                office: false
            },
            job: "office",
            cryptoPrices: {
                btc: 45231,
                eth: 3215,
                doge: 0.15
            }
        };

        // –õ–æ–∫–∞—Ü–∏–∏ –∏–≥—Ä—ã
        const locations = {
            home: {
                name: "–í–∞—à –¥–æ–º",
                emoji: "üè†",
                description: "–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –¥–æ–º–∞. –ú–æ–∂–Ω–æ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ –≥–æ—Ä–æ–¥.",
                actions: ["rest", "sleep"]
            },
            work: {
                name: "–†–∞–±–æ—á–∏–π –æ—Ñ–∏—Å",
                emoji: "üè¢",
                description: "–í—ã –Ω–∞ —Ä–∞–±–æ—Ç–µ. –í—Ä–µ–º—è –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–µ–Ω—å–≥–∏!",
                actions: ["work", "meeting"]
            },
            city: {
                name: "–¶–µ–Ω—Ç—Ä –≥–æ—Ä–æ–¥–∞",
                emoji: "üèôÔ∏è",
                description: "–ì–æ—Ä–æ–¥—Å–∫–æ–π —Ü–µ–Ω—Ç—Ä. –ó–¥–µ—Å—å –µ—Å—Ç—å –º–∞–≥–∞–∑–∏–Ω—ã, –±–∞–Ω–∫–∏ –∏ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è.",
                actions: ["shop", "bank", "entertainment"]
            },
            casino: {
                name: "–ö–∞–∑–∏–Ω–æ Golden",
                emoji: "üé∞",
                description: "–ö–∞–∑–∏–Ω–æ Golden. –ò—Å–ø—ã—Ç–∞–π—Ç–µ —Å–≤–æ—é —É–¥–∞—á—É!",
                actions: ["gamble", "drink", "socialize"]
            }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            loadGameState();
            updateUI();
            startGameClock();
            updateCryptoPrices();
            setupTelegramStars();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
        function loadGameState() {
            const saved = localStorage.getItem('life_simulator_save');
            if (saved) {
                const parsed = JSON.parse(saved);
                Object.assign(gameState, parsed);
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
        function saveGameState() {
            localStorage.setItem('life_simulator_save', JSON.stringify(gameState));
        }

        // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –º–µ–∂–¥—É –ª–æ–∫–∞—Ü–∏—è–º–∏
        function moveToLocation(locationId) {
            const location = locations[locationId];
            if (!location) return;

            gameState.currentLocation = locationId;
            
            document.getElementById('locationImage').textContent = location.emoji;
            document.getElementById('locationName').textContent = location.name;
            document.getElementById('locationDescription').textContent = location.description;

            showNotification(`–í—ã –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∏—Å—å –≤: ${location.name}`);
            saveGameState();
        }

        // –í—Ö–æ–¥ –≤ –∑–¥–∞–Ω–∏–µ
        function enterBuilding(buildingType) {
            const buildingActions = {
                house: () => showNotification("üè† –í—ã –¥–æ–º–∞! –û—Ç–¥—ã—Ö–∞–π—Ç–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ —Å–∏–ª—ã."),
                office: () => showNotification("üè¢ –í—ã –≤ –æ—Ñ–∏—Å–µ! –ù–∞—á–Ω–∏—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –¥–µ–Ω—å–≥–∏."),
                casino: () => showNotification("üé∞ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–∞–∑–∏–Ω–æ! –ò—Å–ø—ã—Ç–∞–π—Ç–µ —É–¥–∞—á—É."),
                car_dealer: () => showNotification("üöó –ê–≤—Ç–æ—Å–∞–ª–æ–Ω. –ü—Ä–∏—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–µ–±–µ –Ω–æ–≤—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å!"),
                bank: () => showNotification("üè¶ –ë–∞–Ω–∫. –£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏ –∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–º–∏.")
            };

            if (buildingActions[buildingType]) {
                buildingActions[buildingType]();
            }
        }

        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
        function performAction(action) {
            const actions = {
                work: () => {
                    if (gameState.energy >= 20) {
                        const earnings = Math.floor(Math.random() * 100) + 50;
                        gameState.money += earnings;
                        updateEnergy(-20);
                        addExperience(10);
                        showNotification(`üíº –í—ã –ø–æ—Ä–∞–±–æ—Ç–∞–ª–∏ –∏ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ $${earnings}!`);
                    } else {
                        showNotification("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã!");
                    }
                },
                rest: () => {
                    updateEnergy(30);
                    showNotification("üò¥ –í—ã –æ—Ç–¥–æ—Ö–Ω—É–ª–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —ç–Ω–µ—Ä–≥–∏—é!");
                },
                casino: () => {
                    if (gameState.money >= 50) {
                        const win = Math.random() > 0.6;
                        const amount = win ? 100 : -50;
                        gameState.money += amount;
                        
                        if (win) {
                            showNotification("üé∞ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ $100 –≤ –∫–∞–∑–∏–Ω–æ! üéâ");
                        } else {
                            showNotification("üé∞ –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ $50 –≤ –∫–∞–∑–∏–Ω–æ... üí∏");
                        }
                    } else {
                        showNotification("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥ –¥–ª—è –∏–≥—Ä—ã –≤ –∫–∞–∑–∏–Ω–æ!");
                    }
                },
                crypto: () => {
                    showNotification("‚Çø –û—Ç–∫—Ä—ã—Ç —Ä–∞–∑–¥–µ–ª –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫—É—Ä—Å—ã –∏ –∏–Ω–≤–µ—Å—Ç–∏—Ä—É–π—Ç–µ.");
                }
            };

            if (actions[action]) {
                actions[action]();
                updateUI();
                saveGameState();
            }
        }

        // –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
        function startJob(jobType) {
            const jobs = {
                office: { name: "–û—Ñ–∏—Å–Ω—ã–π —Ä–∞–±–æ—Ç–Ω–∏–∫", earnings: 80, energy: 20 },
                taxi: { name: "–¢–∞–∫—Å–∏—Å—Ç", earnings: 120, energy: 30 },
                dealer: { name: "–ö—Ä—É–ø—å–µ", earnings: 150, energy: 25 },
                programmer: { name: "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç", earnings: 200, energy: 35 }
            };

            const job = jobs[jobType];
            if (gameState.energy >= job.energy) {
                gameState.money += job.earnings;
                gameState.job = jobType;
                updateEnergy(-job.energy);
                addExperience(15);
                showNotification(`üíº –í—ã –ø–æ—Ä–∞–±–æ—Ç–∞–ª–∏ –∫–∞–∫ ${job.name} –∏ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ $${job.earnings}!`);
                updateUI();
                saveGameState();
            } else {
                showNotification("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —ç—Ç–æ–π —Ä–∞–±–æ—Ç—ã!");
            }
        }

        // –ü–æ–∫—É–ø–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
        function buyProperty(propertyType) {
            const properties = {
                apartment: { price: 50000, name: "–ö–≤–∞—Ä—Ç–∏—Ä–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ" },
                car: { price: 25000, name: "Honda Civic" },
                office: { price: 200000, name: "–û—Ñ–∏—Å–Ω–æ–µ –∑–¥–∞–Ω–∏–µ" }
            };

            const property = properties[propertyType];
            if (gameState.money >= property.price) {
                gameState.money -= property.price;
                gameState.properties[propertyType] = property.name;
                showNotification(`‚úÖ –í—ã –∫—É–ø–∏–ª–∏ ${property.name} –∑–∞ $${property.price.toLocaleString()}!`);
                updateUI();
                saveGameState();
            } else {
                showNotification(`‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ ${property.name}!`);
            }
        }

        // –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã
        function buyCrypto(cryptoType) {
            const amount = 100; // $100 –∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
            if (gameState.money >= amount) {
                gameState.money -= amount;
                gameState.crypto[cryptoType] += amount / gameState.cryptoPrices[cryptoType];
                showNotification(`‚úÖ –ö—É–ø–ª–µ–Ω–æ ${cryptoType.toUpperCase()} –Ω–∞ $${amount}`);
                updateUI();
                saveGameState();
            } else {
                showNotification("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã!");
            }
        }

        function sellCrypto(cryptoType) {
            if (gameState.crypto[cryptoType] > 0) {
                const value = gameState.crypto[cryptoType] * gameState.cryptoPrices[cryptoType];
                gameState.money += value;
                gameState.crypto[cryptoType] = 0;
                showNotification(`‚úÖ –ü—Ä–æ–¥–∞–Ω–æ ${cryptoType.toUpperCase()} –Ω–∞ $${value.toFixed(2)}`);
                updateUI();
                saveGameState();
            } else {
                showNotification(`‚ùå –£ –≤–∞—Å –Ω–µ—Ç ${cryptoType.toUpperCase()} –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏!`);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏
        function updateEnergy(change) {
            gameState.energy = Math.max(0, Math.min(100, gameState.energy + change));
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø—ã—Ç–∞
        function addExperience(exp) {
            gameState.experience += exp;
            if (gameState.experience >= 100) {
                gameState.level++;
                gameState.experience = 0;
                showNotification(`üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ —É—Ä–æ–≤–Ω—è ${gameState.level}!`);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            document.getElementById('money').textContent = '$' + gameState.money.toLocaleString();
            document.getElementById('energy').textContent = gameState.energy + '%';
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('time').textContent = gameState.time;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
            document.getElementById('inventoryCar').textContent = gameState.properties.car;
            document.getElementById('inventoryHouse').textContent = gameState.properties.house;
            document.getElementById('inventoryCash').textContent = '$' + gameState.money.toLocaleString();
            document.getElementById('inventoryCrypto').textContent = gameState.crypto.btc.toFixed(6) + ' BTC';
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –Ω–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É
        function updateCryptoPrices() {
            // –°–ª—É—á–∞–π–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω
            Object.keys(gameState.cryptoPrices).forEach(crypto => {
                const change = (Math.random() - 0.5) * 0.1; // ¬±5%
                gameState.cryptoPrices[crypto] *= (1 + change);
            });

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            document.getElementById('btcPrice').textContent = '$' + gameState.cryptoPrices.btc.toFixed(0) + ' ' + 
                (Math.random() > 0.5 ? 'üìà' : 'üìâ');
            document.getElementById('ethPrice').textContent = '$' + gameState.cryptoPrices.eth.toFixed(0) + ' ' + 
                (Math.random() > 0.5 ? 'üìà' : 'üìâ');
            document.getElementById('dogePrice').textContent = '$' + gameState.cryptoPrices.doge.toFixed(2) + ' ' + 
                (Math.random() > 0.5 ? 'üìà' : 'üìâ');

            // –ü–æ–≤—Ç–æ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            setTimeout(updateCryptoPrices, 30000);
        }

        // –ò–≥—Ä–æ–≤—ã–µ —á–∞—Å—ã
        function startGameClock() {
            let minutes = 0;
            let hours = 8;
            
            setInterval(() => {
                minutes += 10;
                if (minutes >= 60) {
                    minutes = 0;
                    hours = (hours + 1) % 24;
                }
                gameState.time = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
                updateUI();
            }, 10000); // 10 —Å–µ–∫—É–Ω–¥ = 10 –º–∏–Ω—É—Ç –∏–≥—Ä–æ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Stars
        function setupTelegramStars() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –±—É–¥—É—â–∏—Ö –ø–æ–∫—É–ø–æ–∫
            tg.onEvent('invoiceClosed', (event) => {
                if (event.status === 'paid') {
                    gameState.money += 1000;
                    showNotification("üíé –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É! –ü–æ–ª—É—á–µ–Ω–æ $1000 –±–æ–Ω—É—Å–Ω—ã—Ö –¥–µ–Ω–µ–≥!");
                    updateUI();
                    saveGameState();
                }
            });
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∫–ª–∞–¥–æ–∫
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –∫–æ–Ω—Ç–µ–Ω—Ç—ã
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
                tab.classList.add('active');
                const tabName = tab.getAttribute('data-tab');
                document.getElementById(`${tabName}Content`).classList.add('active');
            });
        });

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>